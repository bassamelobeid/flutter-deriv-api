package BOM::Database::Model::FinancialMarketBetOpen;

use Moose;
use BOM::Database::AutoGenerated::Rose::FinancialMarketBetOpen;

extends 'BOM::Database::Model::FinancialMarketBet';

has 'financial_market_bet_open_record' => (
    is      => 'rw',
    isa     => 'BOM::Database::AutoGenerated::Rose::FinancialMarketBetOpen',
    lazy    => 1,
    builder => '_build_financial_market_bet_open_record',
    handles => [BOM::Database::AutoGenerated::Rose::FinancialMarketBetOpen->meta->column_names],
);

sub _build_financial_market_bet_open_record {
    my $self = shift;

    return $self->_initialize_data_access_object('BOM::Database::AutoGenerated::Rose::FinancialMarketBetOpen',
        $self->_extract_related_attributes_for_financial_market_bet_open_class_hashref());
}

sub _extract_related_attributes_for_financial_market_bet_open_class_hashref {
    my $self = shift;

    my $result =
        $self->_extract_related_attributes_for_class_based_on_table_definition_hashref('BOM::Database::AutoGenerated::Rose::FinancialMarketBetOpen');

    if ($self->is_data_object_params_initializied) {
        my $data_object_params = $self->data_object_params;

        if (exists $data_object_params->{'financial_market_bet_id'}) {
            $result->{'id'} = $data_object_params->{'financial_market_bet_id'};
        }
    }

    return $result;
}

sub save {
    my $self = shift;

    $self->_save_orm_object({'record' => $self->financial_market_bet_open_record});

    # Unless if it dies in the process of save
    return 1;
}

sub load {
    my $self = shift;
    my $args = shift;

    my $result = $self->_load_orm_object({
            'record'      => $self->financial_market_bet_open_record,
            'load_params' => $args->{'load_params'}});

    return $result;
}

sub class_orm_record {
    my $self = shift;

    return $self->financial_market_bet_open_record;
}

no Moose;
__PACKAGE__->meta->make_immutable;

=pod

=head1 NAME

BOM::Database::Model::FinancialMarketBetOpen

=head1 SYNOPSIS

 my $payment_fee = BOM::Database::Model::FinancialMarketBetOpen->new(
    {
        'data_object_params'=>
        {
            'account_id' => $account->account_record->id,
            'price'=>10.2,
            ....
        },
        db=>$connection_builder->db
    },
 );

=head1 DESCRIPTION

This class will encapsulate common characteristics attributes.

=over 4

=head1 VERSION

0.1

=head1 AUTHOR

RMG Company

=cut

1;
