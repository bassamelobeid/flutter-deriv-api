[EN]

######
# CR
######

# VIRTUAL ACCOUNT OPENING
verify_email/test_send.json,verify_email/test_receive.json, 'testmultiple@binary.com', 'account_opening'
new_account_virtual/test_send.json,new_account_virtual/test_receive.json,_get_token('testmultiple@binary.com'), 'testmultiple@binary.com', 'id'
authorize/test_send.json,authorize/test_receive_vrtc.json,_get_stashed('new_account_virtual/new_account_virtual/oauth_token'), 'testmultiple@binary.com'
# not allowed to make virtual account with same email
!new_account_virtual/test_send.json,new_account_virtual/test_receive.json,_get_token('testmultiple@binary.com'), 'testmultiple@binary.com', 'id'

# REAL ACCOUNT OPENING
new_account_real/test_send.json,new_account_real/test_receive_cr.json, 'Howdee', 'id'

# placeholder to store token
|placeholder=_get_stashed('new_account_real/new_account_real/oauth_token')|

# virtual client not allowed to make multiple real account call
!new_account_real/test_send.json,new_account_real/test_receive_cr.json, 'Howdee', 'id'

# authorize real account to make multiple accounts
authorize/test_send.json,authorize/test_receive_cr.json,placeholder,'testmultiple@binary.com','Howdee'
payout_currencies/test_send.json,payout_currencies/test_receive_vrt.json, '(USD|EUR|GBP|AUD|BTC)', 5
# will fail as currency for existing client is not set
!new_account_real/test_send.json,new_account_real/test_receive_cr.json, 'Howdee', 'id'

# set account currency
set_account_currency/test_send.json,set_account_currency/test_receive.json, 'USD'
payout_currencies/test_send.json,payout_currencies/test_receive_vrt.json, 'USD', 1

# allowed to make mutliple call now as currency is set for existing account
new_account_real/test_send.json,new_account_real/test_receive_cr.json, 'Howdee', 'id'
authorize/test_send.json,authorize/test_receive_cr.json,_get_stashed('new_account_real/new_account_real/oauth_token'),'testmultiple@binary.com','Howdee'

# will fail as USD already set for one of client
!set_account_currency/test_send.json,set_account_currency/test_receive.json, 'USD'
# we only allow one fiat currency so this will also fail
!set_account_currency/test_send.json,set_account_currency/test_receive.json, 'EUR'
# will fail as accounts exhausted
!new_account_real/test_send.json,new_account_real/test_receive_cr.json, 'Howdee', 'id'

# fail to set currency not in allowed currencies for landing company
!set_account_currency/test_send.json,set_account_currency/test_receive.json, 'ETH'
# ok to set BTC
set_account_currency/test_send.json,set_account_currency/test_receive.json, 'BTC'
# not allowed to set currency again
!set_account_currency/test_send.json,set_account_currency/test_receive.json, 'USD'

# not allowed to make maltainvest as new sibling
!new_account_maltainvest/test_send.json,new_account_maltainvest/test_receive.json, '1'
# not allowed to make japan as new sibling
!new_account_japan/test_send.json,new_account_japan/test_receive.json, 'Susan'

logout/test_send.json,logout/test_receive.json

######
# MLT
######

# VIRTUAL ACCOUNT OPENING
verify_email/test_send.json,verify_email/test_receive.json, 'test-multiple-mlt@binary.com', 'account_opening'
new_account_virtual/test_send.json,new_account_virtual/test_receive.json,_get_token('test-multiple-mlt@binary.com'), 'test-multiple-mlt@binary.com', 'dk'
authorize/test_send.json,authorize/test_receive_vrtc.json,_get_stashed('new_account_virtual/new_account_virtual/oauth_token'), 'test-multiple-mlt@binary.com'

new_account_real/test_send.json,new_account_real/test_receive_mlt.json, 'Howdee', 'dk'
|placeholder=_get_stashed('new_account_real/new_account_real/oauth_token')|

# virtual not allowed to make multiple new accounts
!new_account_real/test_send.json,new_account_real/test_receive_mlt.json, 'Howdee', 'dk'
authorize/test_send.json,authorize/test_receive_mlt.json,placeholder, 'test-multiple-mlt@binary.com', 'Howdee'
payout_currencies/test_send.json,payout_currencies/test_receive_vrt.json, '(USD|EUR|GBP)', 3

# not allowed as previous account has no currency set
!new_account_real/test_send.json,new_account_real/test_receive_mlt.json, 'Howdee', 'dk'

# not allowed as not supported yet
!set_account_currency/test_send.json,set_account_currency/test_receive.json, 'BTC'
# set account currency
set_account_currency/test_send.json,set_account_currency/test_receive.json, 'EUR'
payout_currencies/test_send.json,payout_currencies/test_receive_vrt.json, 'EUR', 1

# still not allowed as fiat currency exhausted and MLT has no cryptocurrency
!new_account_real/test_send.json,new_account_real/test_receive_mlt.json, 'Howdee', 'dk'

new_account_maltainvest/test_send.json,new_account_maltainvest/test_receive_error.json, '0', 'Howdee'
# mlt able to upgrade to maltainvest
new_account_maltainvest/test_send.json,new_account_maltainvest/test_receive.json, '1', 'Howdee'

|placeholder=_get_stashed('new_account_maltainvest/new_account_maltainvest/oauth_token')|

# not allowed to create mutlpile invest account from mlt
!new_account_maltainvest/test_send.json,new_account_maltainvest/test_receive.json, '1', 'Howdee'

authorize/test_send.json,authorize/test_receive_mf.json,placeholder, 'test-multiple-mlt@binary.com', 'Howdee'

# not able to create as previous currency not set
!new_account_maltainvest/test_send.json,new_account_maltainvest/test_receive.json, '1', 'Howdee'
# able to set currency, doesn't depend on mlt account
set_account_currency/test_send.json,set_account_currency/test_receive.json, 'EUR'

# not able to create as fiat currency exhausted and crypto not yet supported for MF
!new_account_maltainvest/test_send.json,new_account_maltainvest/test_receive.json, '1', 'Howdee'
logout/test_send.json,logout/test_receive.json

######
# MLT
######
