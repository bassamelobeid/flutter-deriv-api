[EN]

######
# CR
######

# VIRTUAL ACCOUNT OPENING FOR
verify_email/test_send.json,verify_email/test_receive.json, 'testmultiple@binary.com', 'account_opening'
new_account_virtual/test_send.json,new_account_virtual/test_receive.json,_get_token('testmultiple@binary.com'), 'testmultiple@binary.com', 'id'
authorize/test_send.json,authorize/test_receive_vrtc.json,_get_stashed('new_account_virtual/new_account_virtual/oauth_token'), 'testmultiple@binary.com'
# not allowed to make virtual account with same email
!new_account_virtual/test_send.json,new_account_virtual/test_receive.json,_get_token('testmultiple@binary.com'), 'testmultiple@binary.com', 'id'

# REAL ACCOUNT OPENING
new_account_real/test_send.json,new_account_real/test_receive_cr.json, 'Howdee', 'id'

# placeholder to store token
|placeholder=_get_stashed('new_account_real/new_account_real/oauth_token')|

# virtual client not allowed to make multiple real account call
!new_account_real/test_send.json,new_account_real/test_receive_cr.json, 'Howdee', 'id'

# authorize real account to make multiple accounts
authorize/test_send.json,authorize/test_receive_cr.json,placeholder,'testmultiple@binary.com','Howdee'
payout_currencies/test_send.json,payout_currencies/test_receive_vrt.json, '(USD|EUR|GBP|AUD|BTC)', 5
# will fail as currency for existing client is not set
!new_account_real/test_send.json,new_account_real/test_receive_cr.json, 'Howdee', 'id'

# set account currency
set_account_currency/test_send.json,set_account_currency/test_receive.json, 'USD'
payout_currencies/test_send.json,payout_currencies/test_receive_vrt.json, 'USD', 1

# allowed to make mutliple call now as currency is set for existing account
new_account_real/test_send.json,new_account_real/test_receive_cr.json, 'Howdee', 'id'
authorize/test_send.json,authorize/test_receive_cr.json,_get_stashed('new_account_real/new_account_real/oauth_token'),'testmultiple@binary.com','Howdee'

# will fail as USD already set for one of client
!set_account_currency/test_send.json,set_account_currency/test_receive.json, 'USD'
# we only allow one fiat currency so this will also fail
!set_account_currency/test_send.json,set_account_currency/test_receive.json, 'EUR'
# will fail as currency for existing client is not set
!new_account_real/test_send.json,new_account_real/test_receive_cr.json, 'Howdee', 'id'

# fail to set currency not in allowed currencies for landing company
!set_account_currency/test_send.json,set_account_currency/test_receive.json, 'ETH'
# ok to set BTC
set_account_currency/test_send.json,set_account_currency/test_receive.json, 'BTC'
# not allowed to set currency again
!set_account_currency/test_send.json,set_account_currency/test_receive.json, 'USD'
