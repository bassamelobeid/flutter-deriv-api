name: 'Test Report'
run-name: "Test Report for ${{ github.event.workflow.name }} #${{ github.event.workflow_run.run_number }}"
on:
  workflow_run:
    workflows: ['Build workflow', 'Daily master test']                     # runs after CI workflow
    types:
      - completed
jobs:
  report:
    permissions:
      contents: read
      actions: read
      checks: write  # create check runs
    runs-on: ubuntu-latest
    steps:
    - uses: deriv-com/test-reporter@main
      with:
        artifact: test-results    # artifact name
        name: "Test report for ${{ github.event.workflow.name }} #${{ github.event.workflow_run.run_number }}"
        path: './**/*.xml'  
        reporter: perl-junit              # Format of test results
        list-suites: 'failed'
        list-tests: 'failed'
        

