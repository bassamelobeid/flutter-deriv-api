name: Dependent Tests

on:
  workflow_call:
jobs:
  bom-platform:
    uses: regentmarkets/bom-platform/.github/workflows/base.yml@master
    secrets: inherit
    with:
      repository: regentmarkets/bom-platform
  bom-rpc:
    uses: regentmarkets/bom-rpc/.github/workflows/base.yml@master
    secrets: inherit
    with: 
      repository: regentmarkets/bom-rpc
  bom-postgres:
    uses: regentmarkets/bom-postgres/.github/workflows/base.yml@master
    secrets: inherit
    with: 
      repository: regentmarkets/bom-postgres
  bom-pricing:
    uses: regentmarkets/bom-pricing/.github/workflows/base.yml@master
    secrets: inherit
    with:
      repository: regentmarkets/bom-pricing
  bom:
    uses: regentmarkets/bom/.github/workflows/base.yml@master
    secrets: inherit
    with:
      repository: regentmarkets/bom
  bom-transaction:
    uses: regentmarkets/bom-transaction/.github/workflows/base.yml@master
    secrets: inherit
    with:
      repository: regentmarkets/bom-transaction
  dependent_test_status:
    needs: [bom-platform, bom-rpc, bom-postgres, bom-pricing, bom-transaction, bom]
    if: always()
    uses: regentmarkets/github-actions/.github/workflows/dependent-test-status.yml@master
    with:
      job_status: ${{ toJson(needs)}}
