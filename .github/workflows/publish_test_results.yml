name: publish

on:
    workflow_call:

jobs:
    publish:
        runs-on: ubuntu-latest
        steps:
          - 
            name: Set result file paths
            id: path
            run: | 
              export FILE_PATH="./home/git/regentmarkets/bom-websocket-tests/v3/**/*.xml ./home/git/regentmarkets/bom-websocket-tests/v3/pricing/**/*.xml"
              export FILE_PATH="$FILE_PATH ./home/git/regentmarkets/bom-websocket-tests/v3/security/**/*.xml ./t/**/*.xml "
              export FILE_PATH="$FILE_PATH ./home/git/regentmarkets/bom-websocket-tests/v3/misc/**/*.xml"
              echo "test-path=$FILE_PATH" >> "$GITHUB_OUTPUT"
          - 
            name: Upload results to DataDog
            uses: regentmarkets/github-actions/datadog-publish@upgrade/perl_5.38.2
            with: 
              datadog-api-key: ${{ secrets.DD_PROD_CI_API_KEY }}
              service-name: binary-websocket-api
