transfer_between_accounts_part1:
  description: Contains rules to be applied on real account opening
  arguments: 
    - loginid
    - loginid_from
    - loginid_to
    - account_type_from
    - account_type_to
    - amount
    - currency
  ruleset:
    - client.not_disabled
    - transfers.account_types_are_compatible
    - type: group
      argument_mapping:
        loginid: loginid_from
        account_type: account_type_from
        action: "'withdrawal'"
      ruleset:
        - type: conditional
          on: account_type
          rules_per_value:
            trading: &trading
              - cashier.is_not_locked
              - client.no_withdrawal_locked_status
              - client.no_withdrawal_or_trading_lock_status
              - cashier.profile_requirements
            wallet: *trading
    - type: group
      argument_mapping:
        loginid: loginid_to
        account_type: account_type_to
      ruleset:
        - type: conditional
          on: account_type
          rules_per_value:
            trading: cashier.is_not_locked
            wallet: cashier.is_not_locked
transfer_between_accounts_part3:
  description: Contains rules to be applied on transfer between accounts (part 3)
  arguments: 
    - loginid
    - loginid_from
    - loginid_to
    - account_type_from
    - account_type_to
    - amount
    - currency
  ruleset:
    - type: group
      argument_mapping:
        loginid: loginid_from
      ruleset:
        - payment.currency_matches_account
    - type: group
      argument_mapping:
        loginid: loginid_to
      ruleset:
        - client.has_currency_set
    - transfers.no_different_fiat_currencies
    - transfers.crypto_exchange_rates_availability
    - transfers.clients_are_not_transfer_blocked
cashier_validation:
  description: A temporary action for deposit and withdrawal validation. It will be removed after the enclosed rule group is integrated into all upper-level actions.
  ruleset:
  - type: group
    rule_group: cashier_validation

transfer_between_accounts_part2:
  description: Contains rules to be applied on transfer between accounts (part 2)
  arguments: 
    - loginid
    - loginid_from
    - loginid_to
    - account_type_from
    - account_type_to
    - amount
    - currency
    - token_type
  ruleset:
    - transfers.real_to_virtual_not_allowed
    - transfers.authorized_client_should_be_real
    - transfers.same_account_not_allowed
    - transfers.wallet_accounts_not_allowed
    - transfers.client_loginid_client_from_loginid_mismatch
    - currency.known_currencies_allowed
    - transfers.same_landing_companies
    - currency.account_currency_is_legal
    - type: group
      argument_mapping:
        loginid: loginid_to
      ruleset:
        - currency.account_currency_is_legal
    - type: group
      argument_mapping:
        loginid: loginid_from
      ruleset:
        - currency.account_currency_is_legal
    - type: group
      argument_mapping:
        loginid: loginid_to
      ruleset:
        - client.not_disabled
        - client.no_unwelcome_status
    - type: group
      argument_mapping:
        loginid: loginid_from
      ruleset:
        - client.not_disabled
        - client.has_currency_set
cashier_validation:
  description: A temporary action for deposit and withdrawal validation. It will be removed after the enclosed rule group is integrated into all upper-level actions.
  ruleset:
  - type: group
    rule_group: cashier_validation

