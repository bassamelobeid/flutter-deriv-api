new_account:
  description: Contains rules to be applied on real account opening
  ruleset:
    - user.email_is_verified
    - client.residence_is_not_empty
    - profile.residence_cannot_be_changed
    - residence.is_signup_allowed
    - residence.market_type_is_available
    - residence.not_restricted
    - residence.account_type_is_available_for_real_account_opening
    - landing_company.currency_is_allowed
    - currency.is_currency_suspended
    - currency.experimental_currency
    - landing_company.accounts_limit_not_reached
    - user.has_no_real_clients_without_currency
    - landing_company.required_fields_are_non_empty
    - landing_company.p2p_availability
    - client.signup_immitable_fields_not_changed
    - profile.date_of_birth_complies_minimum_age
    - profile.both_secret_question_and_answer_required
    - profile.valid_profile_countries
    - profile.valid_promo_code
    - profile.valid_non_pep_declaration_time
    - currency.is_available_for_new_account
    - client.check_duplicate_account
    - type: conditional
      on: landing_company
      rules_per_value:
        malta: &from_eu
          - profile.no_pobox_in_address
        maltainvest: *from_eu
        iom: *from_eu
    - type: conditional
      on: residence
      rules_per_value:
        gb:
          - profile.address_postcode_mandatory
          - client.forbidden_postcodes

paymentagent_create:
  description: A set of rules to be applied on paymentagent create
  ruleset:
    - paymentagent.pa_allowed_in_landing_company
    - paymentagent.paymentagent_shouldnt_already_exist

